specVersion: 1.2.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: FGOFuturesContract
    network: lens-testnet
    source:
      address: "0x118558e1351FE59D2ebF6C3421045eBE9fD71ed8"
      abi: FGOFuturesContract
      startBlock: 4185136
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - FuturesContract
      abis:
        - name: FGOFuturesContract
          file: ./abis/FGOFuturesContract.json
        - name: FGOChild
          file: ./abis/FGOChild.json
      eventHandlers:
        - event: FuturesContractOpened(indexed
            uint256,uint256,uint256,uint256,uint256,address,address,address)
          handler: handleFuturesContractOpened
        - event: FuturesContractCancelled(indexed uint256,address)
          handler: handleFuturesContractCancelled
      file: ./src/fgo-futures-contract.ts
  - kind: ethereum
    name: FGOFuturesEscrow
    network: lens-testnet
    source:
      address: "0xee8B5b5b582Dc5D31651b10579236dB74f5B6168"
      abi: FGOFuturesEscrow
      startBlock: 4185136
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - ChildClaimed
        - EscrowedRight
      abis:
        - name: FGOFuturesEscrow
          file: ./abis/FGOFuturesEscrow.json
        - name: FGOFuturesContract
          file: ./abis/FGOFuturesContract.json
        - name: FGOChild
          file: ./abis/FGOChild.json
      eventHandlers:
        - event: ChildClaimedAfterSettlement(indexed uint256,indexed address,uint256,uint256)
          handler: handleChildClaimedAfterSettlement
        - event: RightsDeposited(indexed bytes32,indexed
            address,address,address,uint256,uint256,uint256)
          handler: handleRightsDeposited
        - event: RightsWithdrawn(indexed bytes32,indexed address,uint256)
          handler: handleRightsWithdrawn
      file: ./src/fgo-futures-escrow.ts
  - kind: ethereum
    name: FGOFuturesSettlement
    network: lens-testnet
    source:
      address: "0x7099069Dc36e49E1C158f7ce9a6A0eab62A695c4"
      abi: FGOFuturesSettlement
      startBlock: 4185136
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - SettlementBot
        - ContractSettled
      abis:
        - name: FGOFuturesSettlement
          file: ./abis/FGOFuturesSettlement.json
        - name: FGOFuturesTrading
          file: ./abis/FGOFuturesTrading.json
      eventHandlers:
        - event: ContractSettled(indexed uint256,uint256,uint256,address)
          handler: handleContractSettled
        - event: EmergencySettlement(indexed uint256,address,uint256)
          handler: handleEmergencySettlement
        - event: SettlementBotRegistered(uint256,address)
          handler: handleSettlementBotRegistered
        - event: SettlementBotSlashed(uint256,address)
          handler: handleSettlementBotSlashed
        - event: RewardSlashed(uint256,address)
          handler: handleRewardSlashed
        - event: StakeWithdrawn(uint256,address)
          handler: handleStakeWithdrawn
        - event: StakeIncreased(uint256,address)
          handler: handleStakeIncreased
      file: ./src/fgo-futures-settlement.ts
  - kind: ethereum
    name: FGOFactory
    network: lens-testnet
    source:
      address: "0xf0434751a063F57D98CABe88620515DAB0895CeA"
      abi: FGOFactory
      startBlock: 4185136
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Child
        - PhysicalRights
      abis:
        - name: FGOFactory
          file: ./abis/FGOFactory.json
        - name: FGOChild
          file: ./abis/FGOChild.json
        - name: FGOMarket
          file: ./abis/FGOMarket.json
      eventHandlers:
        - event: ChildContractDeployed(indexed uint256,indexed bytes32,indexed address,address)
          handler: handleChildContractDeployed
        - event: InfrastructureDeployed(indexed bytes32,indexed address,indexed
            address,address,address,address)
          handler: handleInfrastructureDeployed
        - event: TemplateContractDeployed(indexed uint256,indexed bytes32,indexed address,address)
          handler: handleTemplateContractDeployed
        - event: MarketContractDeployed(indexed bytes32,indexed address,address)
          handler: handleMarketContractDeployed
        - event: ParentContractDeployed(indexed bytes32,indexed address,address)
          handler: handleParentContractDeployed
      file: ./src/fgo-factory.ts
  - kind: ethereum
    name: FGOFuturesTrading
    network: lens-testnet
    source:
      address: "0x0C8A98Bd8152F855d918e9606b354a0caC61F1aF"
      abi: FGOFuturesTrading
      startBlock: 4185136
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Order
        - Filler
      abis:
        - name: FGOFuturesTrading
          file: ./abis/FGOFuturesTrading.json
        - name: FGOFuturesContract
          file: ./abis/FGOFuturesContract.json
      eventHandlers:
        - event: FeesCollected(indexed uint256,uint256,uint256,uint256)
          handler: handleFeesCollected
        - event: SellOrderCancelled(indexed uint256,address)
          handler: handleSellOrderCancelled
        - event: SellOrderCreated(indexed uint256,indexed uint256,uint256,uint256,address)
          handler: handleSellOrderCreated
        - event: SellOrderFilled(indexed uint256,uint256,uint256,address)
          handler: handleSellOrderFilled
        - event: SellOrderQuantityUpdated(indexed uint256,indexed uint256,uint256)
          handler: handleSellOrderQuantityUpdated
      file: ./src/fgo-futures-trading.ts
templates:
  - name: FGOChild
    kind: ethereum/contract
    network: lens-testnet
    source:
      abi: FGOChild
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/fgo-child.ts
      entities:
        - Child
        - Metadata
        - PhysicalRights
      abis:
        - name: FGOChild
          file: ./abis/FGOChild.json
        - name: FGOMarket
          file: ./abis/FGOMarket.json
      eventHandlers:
        - event: ChildCreated(indexed uint256,indexed address)
          handler: handleChildCreated
        - event: ChildDeleted(indexed uint256)
          handler: handleChildDeleted
        - event: ChildMinted(indexed uint256,indexed uint256,indexed uint256,address,address,bool)
          handler: handleChildMinted
        - event: PhysicalRightsTransferred(uint256,uint256,uint256,address,address,address)
          handler: handlePhysicalRightsTransferred
  - name: FGOSuppliers
    kind: ethereum/contract
    network: lens-testnet
    source:
      abi: FGOSuppliers
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/fgo-suppliers.ts
      entities:
        - Supplier
      abis:
        - name: FGOSuppliers
          file: ./abis/FGOSuppliers.json
      eventHandlers:
        - event: SupplierCreated(indexed uint256,indexed address)
          handler: handleSupplierCreated
        - event: SupplierUpdated(indexed uint256,indexed address)
          handler: handleSupplierUpdated
        - event: SupplierDeactivated(indexed uint256)
          handler: handleSupplierDeactivated
        - event: SupplierReactivated(indexed uint256)
          handler: handleSupplierReactivated
        - event: SupplierWalletTransferred(indexed uint256,address,address)
          handler: handleSupplierWalletTransferred
  - name: Metadata
    kind: file/ipfs
    mapping:
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/ds-handlers.ts
      handler: handleMetadata
      entities:
        - Metadata
      abis:
        - name: FGOFuturesContract
          file: ./abis/FGOFuturesContract.json
  - name: FulfillerMetadata
    kind: file/ipfs
    mapping:
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/ds-handlers.ts
      handler: handleFulfillerMetadata
      entities:
        - FulfillerMetadata
      abis:
        - name: FGOFuturesContract
          file: ./abis/FGOFuturesContract.json
  - name: SupplierMetadata
    kind: file/ipfs
    mapping:
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/ds-handlers.ts
      handler: handleSupplierMetadata
      entities:
        - SupplierMetadata
      abis:
        - name: FGOFactory
          file: ./abis/FGOFactory.json
  - name: FGOMarket
    kind: ethereum/contract
    network: lens-testnet
    source:
      abi: FGOMarket
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/fgo-market.ts
      entities:
        - ChildOrder
      abis:
        - name: FGOMarket
          file: ./abis/FGOMarket.json
        - name: FGOFulfillers
          file: ./abis/FGOFulfillers.json
        - name: FGOParent
          file: ./abis/FGOParent.json
        - name: FGOAccessControl
          file: ./abis/FGOAccessControl.json
      eventHandlers:
        - event: OrderExecuted(indexed uint256,indexed address,uint256[])
          handler: handleOrderExecuted
  - name: FGOFulfillment
    kind: ethereum/contract
    network: lens-testnet
    source:
      abi: FGOFulfillment
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/fgo-fulfillment.ts
      entities:
        - Fulfillment
      abis:
        - name: FGOFulfillment
          file: ./abis/FGOFulfillment.json
        - name: FGOMarket
          file: ./abis/FGOMarket.json
      eventHandlers:
        - event: FulfillmentStarted(indexed uint256,indexed uint256)
          handler: handleFulfillmentStarted
        - event: FulfillmentCompleted(indexed uint256)
          handler: handleFulfillmentCompleted
        - event: OrderStatusUpdated(indexed uint256,uint8)
          handler: handleOrderStatusUpdated
        - event: StepCompleted(indexed uint256,indexed uint256,indexed address,string)
          handler: handleStepCompleted
  - name: FGOFulfillers
    kind: ethereum/contract
    network: lens-testnet
    source:
      abi: FGOFulfillers
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/fgo-fulfillers.ts
      entities:
        - Fulfiller
      abis:
        - name: FGOFulfillers
          file: ./abis/FGOFulfillers.json
      eventHandlers:
        - event: FulfillerCreated(indexed uint256,indexed address)
          handler: handleFulfillerCreated
        - event: FulfillerUpdated(indexed uint256)
          handler: handleFulfillerUpdated
        - event: FulfillerDeleted(indexed uint256)
          handler: handleFulfillerDeleted
        - event: FulfillerWalletTransferred(indexed uint256,address,address)
          handler: handleFulfillerWalletTransferred
  - name: FGOAccessControl
    kind: ethereum/contract
    network: lens-testnet
    source:
      abi: FGOAccessControl
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/fgo-access-control.ts
      entities:
        - Fulfiller
      abis:
        - name: FGOAccessControl
          file: ./abis/FGOAccessControl.json
      eventHandlers:
        - event: FulfillerAdded(indexed address)
          handler: handleFulfillerAdded
  - name: FGOParent
    kind: ethereum/contract
    network: lens-testnet
    source:
      abi: FGOParent
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/fgo-parent.ts
      entities:
        - Parent
        - SubPerformer
        - FulfillmentStep
        - FulfillmentWorkflow
      abis:
        - name: FGOParent
          file: ./abis/FGOParent.json
        - name: FGOAccessControl
          file: ./abis/FGOAccessControl.json
      eventHandlers:
        - event: ParentUpdated(indexed uint256)
          handler: handleParentUpdated
        - event: ParentCreated(indexed uint256,indexed address)
          handler: handleParentCreated
  - name: FGOTemplateChild
    kind: ethereum/contract
    network: lens-testnet
    source:
      abi: FGOTemplateChild
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      file: ./src/fgo-template-child.ts
      entities:
        - Child
        - Metadata
        - PhysicalRights
      abis:
        - name: FGOTemplateChild
          file: ./abis/FGOTemplateChild.json
        - name: FGOChild
          file: ./abis/FGOChild.json
        - name: FGOMarket
          file: ./abis/FGOMarket.json
      eventHandlers:
        - event: TemplateReserved(indexed uint256,indexed address)
          handler: handleTemplateReserved
        - event: ChildDeleted(indexed uint256)
          handler: handleChildDeleted
        - event: ChildMinted(indexed uint256,indexed uint256,indexed uint256,address,address,bool)
          handler: handleChildMinted
        - event: PhysicalRightsTransferred(uint256,uint256,uint256,address,address,address)
          handler: handlePhysicalRightsTransferred